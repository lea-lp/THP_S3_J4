require 'nokogiri'
require 'open-uri'
require 'dotenv'
require 'twitter'


Dotenv.load


class TownhallsFollower
	attr_accessor :client, :names

	TESTING = ["@o0SamArts0o"]

	# Définition de la méthode set_keys, pour la synchronisation avec l'API

	def initialize # Initialisation du serveur

		@client = Twitter::REST::Client.new do |config|
  			config.consumer_key        = ENV["client_api_key"]
  			config.consumer_secret     = ENV["client_api_secret"]
  			config.access_token        = ENV["acces_token"]
  			config.access_token_secret = ENV["access_token_secret"]
  		end
  		@names = {"LOT":{"ALBAS":[46,"mairiealbas@wanadoo.fr"],"ALBIAC":[46,"mairie.2.albiac@wanadoo.fr"],"ALVIGNAC":[46,"mairie@alvignac.fr"],"ANGLARS":[46,"mairie.anglars.46120@wanadoo.fr"],"ANGLARS-JUILLAC":[46,"mairieanglarsjuillac@wanadoo.fr"],"ANGLARS-NOZAC":[46,"mairie-anglars-nozac@info46.com"],"ARCAMBAL":[46,"mairie.arcambal@wanadoo.fr"],"ASSIER":[46,"assier.mairie@wanadoo.fr"],"AUJOLS":[46,"mairie.aujols@orange.fr"],"AUTOIRE":[46,"mairie.autoire@wanadoo.fr"],"AYNAC":[46,"mairie-aynac@wanadoo.fr"],"BACH":[46,"mairie.bach@wanadoo.fr"],"BAGAT-EN-QUERCY":[46,"mairie.bagat@orange.fr"],"BAGNAC-SUR-CELE":[46,"mairie-de-bagnac-sur-cele@wanadoo.fr"],"BALADOU":[46,"mairie-baladou@info46.com"],"BANNES":[46,"mairiebanneslot@wanadoo.fr"],"BEAUMAT":[46,"mairie.beaumat@orange.fr"],"BEAUREGARD":[46,"mairie.beauregard@wanadoo.fr"],"BEDUER":[46,"mairie.beduer@wanadoo.fr"],"BELAYE":[46,"mairie-de-belaye@alsatis.net"],"BELFORT-DU-QUERCY":[46,"mairie.belfort@wanadoo.fr"],"BELMONT-BRETENOUX":[46,"mairie-belmont-bretenoux@info46.com"],"BELMONTET":[46,"mairie.belmontet@wanadoo.fr"],"BELMONT-SAINTE-FOI":[46,"belmairie@xilan.fr"],"BERGANTY":[46,"mairie.berganty@wanadoo.fr"],"BESSONIES":[46,"mairie.bessonies@meshnet.fr"],"BETAILLE":[46,"mairie-betaille@info46.com"],"BIARS-SUR-CERE":[46,"mairiebiars@wanadoo.fr"],"BIO":[46,"mairie.bio@wanadoo.fr"],"BLARS":[46,"mairie.blars@orange.fr"],"BOISSIERES":[46,"mairie.de.boissieres@wanadoo.fr"],"BOUSSAC":[46,"boussac.mairie@wanadoo.fr"],"BOUZIES":[46,"communedebouzies@wanadoo.fr"],"BRENGUES":[46,"mairie.brengues@wanadoo.fr"],"BRETENOUX":[46,"mairie.de.bretenoux@wanadoo.fr"],"CABRERETS":[46,"maipech@free.fr"],"CADRIEU":[46,"cadrieu.mairie@wanadoo.fr"],"CAHORS":[46,""],"CAHUS":[46,"mairie.cahus@wanadoo.fr"],"CAILLAC":[46,"commune.de.caillac@wanadoo.fr"],"CAJARC":[46,"mairie-cajarc@info46.com"],"CALAMANE":[46,"mairie-de-calamane@wanadoo.fr"],"CALES":[46,"mairie-cales@info46.com"],"CALVIAC":[46,"mairie.calviac.46@wanadoo.fr"],"CALVIGNAC":[46,"mairiedecalvignac@wanadoo.fr"],"CAMBAYRAC":[46,"cambayrac@orange.fr"],"CAMBES":[46,"mairie.cambes@wanadoo.fr"],"CAMBOULIT":[46,"camboulit.mairie@wanadoo.fr"],"CAMBURAT":[46,"mairie.camburat@wanadoo.fr"],"CANIAC-DU-CAUSSE":[46,"mairie-caniac-du-causse@info46.com"],"CAPDENAC":[46,"mairie-capdenac-lot@wanadoo.fr"],"CARAYAC":[46,"mairiecarayac@wanadoo.fr"],"CARDAILLAC":[46,"mairie-de-cardaillac@wanadoo.fr"],"CARENNAC":[46,"mairie-carennac@info46.com"],"CARLUCET":[46,"carlucet.mairie@orange.fr"],"CARNAC-ROUFFIAC":[46,"mairie.carnac.rouffiac@wanadoo.fr"],"CASSAGNES":[46,"cassagnes.mairie@wanadoo.fr"],"CASTELFRANC":[46,"mairie.castelfranc@wanadoo.fr"],"CASTELNAU-MONTRATIER":[46,"mairiecastelnau@wanadoo.fr"],"CATUS":[46,"mairie-de-catus@wanadoo.fr"],"CAVAGNAC":[46,"mairie.cavagnac46@wanadoo.fr"],"CAZALS":[46,"mairiecazals@wanadoo.fr"],"CAZILLAC":[46,"cazillac.cne@wanadoo.fr"],"CENEVIERES":[46,"mairie.cenevieres@wanadoo.fr"],"CEZAC":[46,"mairie.cezac@wanadoo.fr"],"CIEURAC":[46,"mairiecieurac@wanadoo.fr"],"COMIAC":[46,"mairie.comiac@wanadoo.fr"],"CONCORES":[46,"mairie.concores@wanadoo.fr"],"CONCOTS":[46,"mairie.concots@wanadoo.fr"],"CONDAT":[46,"commune.condat@wanadoo.fr"],"CORN":[46,"mairiedecorn@wanadoo.fr"],"CORNAC":[46,"mairie-cornac@info46.com"],"COURS":[46,"mairie.cours@packsurfwifi.com"],"COUZOU":[46,"mairie-couzou@info46.com"],"CRAS":[46,"mairiedecras@wanadoo.fr"],"CRAYSSAC":[46,"mairie-de-crayssac@wanadoo.fr"],"CREGOLS":[46,"mairie.cregols@wanadoo.fr"],"CREMPS":[46,"cremps@wanadoo.fr"],"CRESSENSAC":[46,"mairiedecressensac@wanadoo.fr"],"CREYSSE":[46,"mairie.creysse@wanadoo.fr"],"CUZAC":[46,"cuzac.mairie@wanadoo.fr"],"CUZANCE":[46,"mairie.cuzance@wanadoo.fr"],"DEGAGNAC":[46,"mairie-degagnac@wanadoo.fr"],"DOUELLE":[46,"mairiedouelle@orange.fr"],"DURAVEL":[46,"mairie.duravel@wanadoo.fr"],"DURBANS":[46,"mairie.durbans@wanadoo.fr"],"ESCAMPS":[46,"escamps46.mairie@wanadoo.fr"],"ESCLAUZELS":[46,"mairie.esclauzels@wanadoo.fr"],"ESPAGNAC-SAINTE-EULALIE":[46,"mairie.espagnac@wanadoo.fr"],"ESPEDAILLAC":[46,"commune.espedaillac@orange.fr"],"ESPERE":[46,"mairie-espere@info46.com"],"ESPEYROUX":[46,"mairie.espeyroux@wanadoo.fr"],"ESTAL":[46,"estal.mairie@wanadoo.fr"],"FAJOLES":[46,"mairie-fajoles@wanadoo.fr"],"FARGUES":[46,"mairiedefargues@wanadoo.fr"],"FAYCELLES":[46,"mairie.faycelles@wanadoo.fr"],"FELZINS":[46,"mairie@felzins.fr"],"FIGEAC":[46,"secretariat.general@ville-figeac.fr"],"FLAUGNAC":[46,"mairie.flaugnac@wanadoo.fr"],"FLAUJAC-GARE":[46,"flaujac.mairie@wanadoo.fr"],"FLAUJAC-POUJOLS":[46,"flaujacpoujolsmairie@wanadoo.fr"],"FLOIRAC":[46,"mairie.floirac.lot@wanadoo.fr"],"FLORESSAS":[46,"floressas2@wanadoo.fr"],"FONS":[46,"mairie.fons@wanadoo.fr"],"FONTANES":[46,"mairie-fontanes@wanadoo.fr"],"FONTANES-DU-CAUSSE":[46,"mairie.fontanes.du.causse@wanadoo.fr"],"FOURMAGNAC":[46,"mairie.fourmagnac@wanadoo.fr"],"FRANCOULES":[46,"mairie-de-francoules@wanadoo.fr"],"FRAYSSINET":[46,"mairie-frayssinet@info46.com"],"FRAYSSINET-LE-GELAT":[46,"mairie.frayssinet.legelat@wanadoo.fr"],"FRAYSSINHES":[46,"mairie.frayssinhes@wanadoo.fr"],"FRONTENAC":[46,"mairie.frontenac@meshnet.fr"],"GAGNAC-SUR-CERE":[46,"mairie-gagnac-sur-cere@info46.com"],"GIGNAC":[46,"mairie-gagnac-sur-cere@info46.com"],"GIGOUZAC":[46,"mairie.de.gigouzac@wanadoo.fr"],"GINDOU":[46,"mairie.gindou@wanadoo.fr"],"GINOUILLAC":[46,"mairie.ginouillac@orange.fr"],"GINTRAC":[46,"mairie.gintrac@wanadoo.fr"],"GIRAC":[46,"mairie-girac@info46.com"],"GLANES":[46,"mairie-glanes@info46.com"],"GORSES":[46,"mairie.gorses@wanadoo.fr"],"GOUJOUNAC":[46,"mairiegoujounac@wanadoo.fr "],"GOURDON":[46,"contact@gourdon.fr"],"GRAMAT":[46,"mairie.gramat@wanadoo.fr"],"GREALOU":[46,"mairie.grealou@wanadoo.fr"],"GREZELS":[46,"communedegrezels@orange.fr"],"GREZES":[46,"mairie-grezes@orange.fr"],"ISSENDOLUS":[46,"mairie.issendolus@wanadoo.fr"],"ISSEPTS":[46,"mairie.issepts@wanadoo.fr"],"LABASTIDE-DU-HAUT-MONT":[46,"labastideduhautmont.mairie@wanadoo.fr"],"LABASTIDE-DU-VERT":[46,"mairie.de.labastide.du.vert@wanadoo.fr"],"LABASTIDE-MARNHAC":[46,"mairie.labastidemarnhac@wanadoo.fr"],"LABASTIDE-MURAT":[46,"mairie.labastide-murat@wanadoo.fr"],"LABATHUDE":[46,"jacques.virole@wanadoo.fr"],"LABURGADE":[46,"mairie.laburgade@wanadoo.fr"],"LACAM-D'OURCET":[46,"mairie.lacamdourcet@wanadoo.fr"],"LACAPELLE-CABANAC":[46,"mairie.lacapelle-cabanac@wanadoo.fr"],"LACAPELLE-MARIVAL":[46,"lacapelle.mairie@wanadoo.fr"],"LACAVE":[46,"mairie-lacave@info46.com"],"LACHAPELLE-AUZAC":[46,"mairie-lachapelle-auzac@info46.com"],"LADIRAT":[46,"commune-de-ladirat@orange.fr"],"LAGARDELLE":[46,"mairiedelagardelle@wanadoo.fr"],"LALBENQUE":[46,"mairie-lalbenque@info46.com"],"LAMAGDELAINE":[46,"mairielamagdelaine2@wanadoo.fr"],"LAMATIVIE":[46,"mairie.lamativie@wanadoo.fr"],"LAMOTHE-CASSEL":[46,"mairielamothecassel@wanadoo.fr"],"LAMOTHE-FENELON":[46,"mairie.lamothe-fenelon@orange.fr"],"LANZAC":[46,"mairie.lanzac@wanadoo.fr"],"LARAMIERE":[46,"mairie.laramiere@wanadoo.fr"],"LARNAGOL":[46,"mairie.larnagol@wanadoo.fr"],"LAROQUE-DES-ARCS":[46,"mairie.laroque.arcs@orange.fr"],"LARROQUE-TOIRAC":[46,"larroque-toirac-email@wanadoo.fr"],"LASCABANES":[46,"mairielascabanes@wanadoo.fr"],"LATOUILLE-LENTILLAC":[46,"mairie-latouille-lentillac@info46.com"],"LATRONQUIERE":[46,"mairie-de-latronquiere@wanadoo.fr"],"LAURESSES":[46,"mairie.lauresses@wanadoo.fr"],"LAUZES":[46,"mairie.lauzes@wanadoo.fr"],"LAVAL-DE-CERE":[46,"lavaldecere@wanadoo.fr"],"LAVERCANTIERE":[46,"mairielavercantiere@wanadoo.fr"],"LAVERGNE":[46,"mairie-de-lavergne@wanadoo.fr"],"LE-BASTIT":[46,"mairie.lebastit@wanadoo.fr"],"LE-BOULVE":[46,"mairie-le-boulve@info46.com"],"LE-BOURG":[46,"mairie.lebourg@wanadoo.fr"],"LE-BOUYSSOU":[46,"le-bouyssou.mairie@wanadoo.fr"],"LEBREIL":[46,"mairie.lebreil@wanadoo.fr"],"LE-MONTAT":[46,"mairie.montat@wanadoo.fr"],"LENTILLAC-DU-CAUSSE":[46,"mairie@lentillac-du-causse.fr"],"LENTILLAC-SAINT-BLAISE":[46,"mairie-lentillac-st-blaise@wanadoo.fr"],"LEOBARD":[46,"mairie.leobard@wanadoo.fr"],"LE-ROC":[46,"mairie.leroc@meshnet.fr"],"LES-ARQUES":[46,"mairie.les.arques@wanadoo.fr"]},"DROME":{"AIX-EN-DIOIS":[26,"mairie-aix-en-diois@wanadoo.fr"],"ALBON":[26,"mairie-dalbon@wanadoo.fr"],"ALEYRAC":[26,"mairie@aleyrac.fr"],"ALIXAN":[26,"accueil@mairie-alixan.fr"],"ALLAN":[26,"mairie-allan@wanadoo.fr"],"ALLEX":[26,"mairie.allex@wanadoo.fr"],"AMBONIL":[26,"mairie.ambonil@wanadoo.fr"],"ANCONE":[26,"mairie.ancone@wanadoo.fr"],"ANDANCETTE":[26,"mairie-andancette@wanadoo.fr"],"ANNEYRON":[26,"mairie-anneyron@wanadoo.fr"],"AOUSTE-SUR-SYE":[26,"mairie@mairie-aouste-sur-sye.fr"],"ARNAYON":[26,"mairie-anneyron@wanadoo.fr"],"ARPAVON":[26,"mairiearpavon@wanadoo.fr"],"ARTHEMONAY":[26,"mairie-darthemonay@orange.fr"],"AUBENASSON":[26,""],"AUBRES":[26,"mairie.aubres@wanadoo.fr"],"AUCELON":[26,"gerard-boulade@wanadoo.fr"],"AULAN":[26,"mairiedaulan@orange.fr"],"AUREL":[26,"mairie.aurel26@orange.fr"],"AUTICHAMP":[26,"mairie.autichamp@wanadoo.fr"],"BALLONS":[26,"mairieballons@orange.fr"],"BARBIERES":[26,"barbieres.mairie@wanadoo.fr"],"BARCELONNE":[26,"mairie.barcelonne@wanadoo.fr"],"BARNAVE":[26,"mairie-barnave@wanadoo.fr"],"BARRET-DE-LIOURE":[26,"mairiebarretdelioure@orange.fr"],"BARSAC":[26,"mairie.barsac@wanadoo.fr"],"BATHERNAY":[26,"mairie-de-bathernay@orange.fr"],"BEAUFORT-SUR-GERVANNE":[26,"beaufort.gervanne@wanadoo.fr"],"BEAUMONT-EN-DIOIS":[26,"mairiebeaumontdiois@orange.fr"],"BEAUMONT-LES-VALENCE":[26,"contact@beaumontlesvalence.fr"],"BEAUMONT-MONTEUX":[26,"beaumont-monteux@orange.fr"],"BEAUREGARD-BARET":[26,"mairie.beauregard.baret@wanadoo.fr"],"BEAURIERES":[26,"mairie.beaurieres@wanadoo.fr"],"BEAUSEMBLANT":[26,"mairie.beausemblant@wanadoo.fr"],"BEAUVALLON":[26,"beauvallon.mairie@wanadoo.fr"],"BEAUVOISIN":[26,"mairiebeauvoisin@gmail.com"],"BELLECOMBE-TARENDOL":[26,"mairie.bellecombe-tarendol@wanadoo.fr"],"BELLEGARDE-EN-DIOIS":[26,""],"BENIVAY-OLLON":[26,"mairiebenivay@numeo.fr"],"BESAYES":[26,"mairie.besayes@wanadoo.fr"],"BESIGNAN":[26,""],"BEZAUDUN-SUR-BINE":[26,"mairiebezaudun@orange.fr "],"BONLIEU-SUR-ROUBION":[26,"bonlieu.mairie@numeo.fr"],"BOUCHET":[26,"mairie-bouchet@wanadoo.fr"],"BOULC":[26,"mairie.boulc@wanadoo.fr"],"BOURDEAUX":[26,"mairiebourdeaux@wanadoo.fr"],"BOURG-DE-PEAGE":[26,"contact@bourgdepeage.com"],"BOURG-LES-VALENCE":[26,"accueil.mairie@bourg-les-valence.fr"],"BOUVANTE":[26,"mairiecommunedebouvante@neuf.fr"],"BOUVIERES":[26,"mairiede.bouvieres@wanadoo.fr"],"BREN":[26,"mairiedebren@wanadoo.fr"],"BRETTE":[26,""],"BUIS-LES-BARONNIES":[26,"jmairie@wanadoo.fr"],"CHABEUIL":[26,"mairie-chabeuil@wanadoo.fr"],"CHABRILLAN":[26,"mairie-chabrillan@ladrome.fr"],"CHALANCON":[26,"mairie.chalancon984@orange.fr"],"CHAMALOC":[26,"mairie.chamaloc@wanadoo.fr"],"CHAMARET":[26,"mairie.chamaret@wanadoo.fr"],"CHANOS-CURSON":[26,"chanoscurson@wanadoo.fr"],"CHANTEMERLE-LES-BLES":[26,"mairie.chantemerle.les.bles@wanadoo.fr"],"CHANTEMERLE-LES-GRIGNAN":[26,"chantemerle.grignan@wanadoo.fr"],"CHARENS":[26,"mairie-charens@orange.fr"],"CHARMES-SUR-L'HERBASSE":[26,"mairie.de.charmes@orange.fr"],"CHAROLS":[26,"mairie.charols@wanadoo.fr"],"CHARPEY":[26,"mairie-de-charpey@wanadoo.fr"],"CHASTEL-ARNAUD":[26,"helene.saillans@yahoo.fr"],"CHATEAUDOUBLE":[26,"mairie.chateaudouble@wanadoo.fr"],"CHATEAUNEUF-DE-BORDETTE":[26,""],"CHATEAUNEUF-DE-GALAURE":[26,"chateauneuf.mairie@wanadoo.fr"],"CHATEAUNEUF-DU-RHONE":[26,"chateauneufdurhone@wanadoo.fr"],"CHATEAUNEUF-SUR-ISERE":[26,"secretariat@mairie-chateauneuf-sur-isere.fr"],"CHATILLON-EN-DIOIS":[26,"mairie.chatillonendiois@wanadoo.fr"],"CHATILLON-SAINT-JEAN":[26,"chatillon.st.jean@cc-pays-romans.fr"],"CHATUZANGE-LE-GOUBET":[26,"mairiedechatuzange@wanadoo.fr"],"CHAUDEBONNE":[26,""],"CHAUVAC-LAUX-MONTAUX":[26,"mairie.chauvac@wanadoo.fr"],"CHAVANNES":[26,"mairie.chavannes@wanadoo.fr"],"CLANSAYES":[26,"mairie@clansayes.fr"],"CLAVEYSON":[26,"mairie.claveyson@wanadoo.fr"],"CLEON-D'ANDRAN":[26,"mairie.cleon.andran@wanadoo.fr"],"CLERIEUX":[26,"clerieux@cc-pays-romans.fr"],"CLIOUSCLAT":[26,"mairie-cliousclat@wanadoo.fr"],"COBONNE":[26,"mairiecobonne@wanadoo.fr"],"COLONZELLE":[26,"mairie@colonzelle.com"],"COMBOVIN":[26,"mairie.combovin@wanadoo.fr"],"COMPS":[26,"comps.mairie@orange.fr"],"CONDILLAC":[26,"mairie.condillac@orange.fr"],"CONDORCET":[26,"mairie.condorcet@wanadoo.fr"],"CORNILLAC":[26,"mairiecornillac@numeo.fr"],"CORNILLON-SUR-L'OULE":[26,"mairie.cornillon@orange.fr"],"CREPOL":[26,"crepol@cc-pays-romans.fr"],"CREST":[26,"admin@mairie-crest.fr"],"CROZES-HERMITAGE":[26,"mairie.crozes@wanadoo.fr"],"CRUPIES":[26,"mairie.crupies@orange.fr"],"CURNIER":[26,"mairie.de.curnier@orange.fr"],"DIE":[26,"administration@mairie-die.fr"],"DIEULEFIT":[26,"etat-civil@mairie-dieulefit.fr"],"DIVAJEU":[26,"mairie.divajeu@wanadoo.fr"],"DONZERE":[26,"secretariat.elus@donzere.net"],"ECHEVIS":[26,"mairie.echevis@wanadoo.fr"],"EPINOUZE":[26,"mairie.epinouze@orange.fr"],"EROME":[26,"mairie.erome@laposte.net"],"ESPELUCHE":[26," mairie@espeluche.fr"],"ESPENEL":[26,"mairie.espenel252@wanadoo.fr"],"ESTABLET":[26,"mairie.establet@cg23.fr"],"ETOILE-SUR-RHONE":[26,"communication@mairie-etoilesurrhone.fr"],"EURRE":[26,"mairie.eurre@wanadoo.fr"],"EYGALAYES":[26,"mairie-eygalayes@orange.fr"],"EYGALIERS":[26,"mairie.eygaliers@orange.fr"],"EYGLUY-ESCOULIN":[26,"mairie.eygluy@orange.fr"],"EYMEUX":[26,"mairie.eymeux@wanadoo.fr"],"EYROLES":[26,"mairie.eyroles@aliceadsl.fr"],"EYZAHUT":[26,"Mairie.eyzahut@orange.fr"],"FAY-LE-CLOS":[26,"fayleclos.commune@orange.fr"],"FELINES-SUR-RIMANDOULE":[26,"mairie.felines.r@wanadoo.fr"],"FERRASSIERES":[26,"mairie.ferrassieres@orange.fr"],"FRANCILLON-SUR-ROUBION":[26,"mairie.francillon26@wanadoo.fr"],"GENISSIEUX":[26,"mairie.genissieux@orange.fr"],"GERVANS":[26,"gervans@free.fr"],"GEYSSANS":[26,"geyssans@cc-pays-romans.fr"],"GIGORS-ET-LOZERON":[26,"gigorsetlozeron@wanadoo.fr"],"GLANDAGE":[26,"mairieglandage@orange.fr"],"GRANE":[26,"Mairie.Grane@vallee-drome.com"],"GRANGES-LES-BEAUMONT":[26,"granges.les.beaumont@cc-pays-romans.fr"],"GRIGNAN":[26,"accueil.mairie@ville-grignan.fr"],"GUMIANE":[26,""],"HAUTERIVES":[26,"contact@mairie-hauterives.fr"],"HOSTUN":[26,"mairie-hostun@wanadoo.fr"],"IZON-LA-BRUISSE":[26,"mairie-izon@cg26.fr"],"JAILLANS":[26,"mairie.jaillans@wanadoo.fr"],"JONCHERES":[26,"mairie.miscon@wanadoo.fr"],"LA-BATIE-DES-FONDS":[26,"fngondouin@orange.fr"],"LA-BATIE-ROLLAND":[26,"mairie.lbr@wanadoo.fr"],"LA-BAUME-CORNILLANE":[26,"mairie.labaumecornillane@wanadoo.fr"],"LA-BAUME-DE-TRANSIT":[26,"mairie.baume.transit@wanadoo.fr"],"LA-BAUME-D'HOSTUN":[26,"mairie.la.baume.dhostun@wanadoo.fr"],"LA-BEGUDE-DE-MAZENC":[26,"mairie.la.begude.de.mazenc@wanadoo.fr"],"LABOREL":[26,"hvlaborel@numeo.fr"],"LA-CHAPELLE-EN-VERCORS":[26,"mairie.lachapelleenvercors@wanadoo.fr"],"LA-CHARCE":[26,"mairie.lacharce@wanadoo.fr"],"LACHAU":[26,"mairielachau26@wanadoo.fr"],"LA-CHAUDIERE":[26,"helene.faillans@yahoo.fr"],"LA-COUCOURDE":[26,"contact@lacoucourde-mairie.com"],"LA-GARDE-ADHEMAR":[26,"mairie.gardeadhemar@wanadoo.fr"],"LA-LAUPIE":[26,"mairie.la-laupie@wanadoo.fr"],"LA-MOTTE-CHALANCON":[26,"mairie@lamottechalancon.com"],"LA-MOTTE-DE-GALAURE":[26,"mairie.la.motte@wanadoo.fr"],"LA-MOTTE-FANJAS":[26,"mairie.la-motte-fanjas@wanadoo.fr"],"LA-PENNE-SUR-L'OUVEZE":[26,"lapennesurlouveze.mairie@orange.fr"],"LAPEYROUSE-MORNAY":[26,"mairie.lapeyrouse@wanadoo.fr"],"LA-REPARA-AURIPLES":[26,"mairie.la.repara-auriples@wanadoo.fr"],"LARNAGE":[26,"contact@larnagemairie.com"],"LA-ROCHE-DE-GLUN":[26,"mairie.rdg@wanadoo.fr"],"LA-ROCHE-SUR-GRANE":[26,"mairie.de.la.roche.sur.grane@wanadoo.fr"],"LA-ROCHE-SUR-LE-BUIS":[26,"mairie.larochesurlebuis@wanadoo.fr"],"LA-ROCHETTE-DU-BUIS":[26,"mairie-rochette@wanadoo.fr"],"LA-TOUCHE":[26,"mairie.la.touche@wanadoo.fr"],"LAUX-MONTAUX":[26,"mairie.chauvac@wanadoo.fr"],"LAVAL-D'AIX":[26,"mairie.laval-daix@wanadoo.fr"],"LAVEYRON":[26,"commune-de-laveyron@wanadoo.fr"],"LE-CHAFFAL":[26,"mairielechaffal@wanadoo.fr"],"LE-CHALON":[26,"le.chalon@cc-pays-romans.fr"],"LE-GRAND-SERRE":[26,"commune-du-grand-serre@orange.fr"],"LEMPS":[26,""],"LENS-LESTANG":[26,"lens-lestang@voila.fr"],"LEONCEL":[26,"mairie.leoncel@wanadoo.fr"],"LE-PEGUE":[26,"mairie-le-pegue@wanadoo.fr"],"LE-POET-CELARD":[26,"mairielepoetcelard@wanadoo.fr"],"LE-POET-EN-PERCIP":[26,""],"LE-POET-LAVAL":[26,"mairie.poet.laval@wanadoo.fr"],"LE-POET-SIGILLAT":[26,"mairie.dupoetsigillat@orange.fr"],"LESCHES-EN-DIOIS":[26,"mairie.lesches-diois@orange.fr"],"LES-GRANGES-GONTARDES":[26,"mairielesgrangesgontardes@wanadoo.fr"],"LES-PILLES":[26,"mairie.lespilles@orange.fr"],"LES-PRES":[26,"mairie.les.pres@orange.fr"],"LES-TONILS":[26,"lestonils@wanadoo.fr"],"LES-TOURRETTES":[26,"mairie.les.tourrettes@orange.fr"],"LIVRON-SUR-DROME":[26,"cabinet@mairie-livron.fr"],"LORIOL-SUR-DROME":[26,"mairie.loriol@wanadoo.fr"],"LUC-EN-DIOIS":[26,"mairie.luc@wanadoo.fr"],"LUS-LA-CROIX-HAUTE":[26,"mairie.luslacroixhaute@orange.fr"],"MALATAVERNE":[26,"mairie.malataverne@wanadoo.fr"],"MALISSARD":[26,"contact.mairie@mairie-de-malissard.fr"],"MANAS":[26,"mairiemanas@orange.fr"],"MANTHES":[26,"mairiemanthes@wanadoo.fr"],"MARCHES":[26,"mairiedemarches@wanadoo.fr"],"MARGES":[26,"mairie.marges@wanadoo.fr"],"MARIGNAC-EN-DIOIS":[26,"marignac-mairie@orange.fr"],"MARSANNE":[26,"mairiedemarsanne@wanadoo.fr"],"MARSAZ":[26,"mairiemarsaz@wanadoo.fr"],"MENGLON":[26,"mairiedemenglon@wanadoo.fr"],"MERCUROL":[26,"commune-de-mercurol@wanadoo.fr"],"MERINDOL-LES-OLIVIERS":[26,"merindollesoliviers@numeo.fr"],"MEVOUILLON":[26,"mairie-mevouillon@numeo.fr"],"MIRABEL-AUX-BARONNIES":[26,"mairie.mirabel@wanadoo.fr"],"MIRABEL-ET-BLACONS":[26,"cnemirabeletblacons@wanadoo.fr"],"MIRIBEL":[26,"miribel@cc-pays-romans.fr"],"MIRMANDE":[26,""],"MISCON":[26,"mairie.miscon@wanadoo.fr"],"MOLIERES-GLANDAZ":[26,"mairie.molieresglandaz@wanadoo.fr"],"MOLLANS-SUR-OUVEZE":[26,"mairiemollan@wanadoo.fr"],"MONTAUBAN-SUR-L'OUVEZE":[26,"comontaub@numeo.fr"],"MONTAULIEU":[26,"montaulieu.mairie@numeo.fr"],"MONTBOUCHER-SUR-JABRON":[26,"mairie.montboucher@orange.fr"],"MONTBRISON":[26,"mairie@ville-montbrison.fr"],"MONTBRUN-LES-BAINS":[26,"mairie.montbrunlesbains@nordnet.fr"],"MONTCHENU":[26,"mairie-montchenu@orange.fr"],"MONTCLAR-SUR-GERVANNE":[26,"mairie.montclar.gervanne@wanadoo.fr"],"MONTELEGER":[26,"mairie.monteleger@wanadoo.fr"],"MONTELIER":[26,"mairie-montelier@wanadoo.fr"]},"ARDECHE":{"ACCONS":[7,"mairie.accons@inforoutes-ardeche.fr"],"AILHON":[7,"mairie-ailhon@orange.fr"],"AIZAC":[7,"ma-aizac@inforoutes-ardeche.fr"],"AJOUX":[7,"mairie.ajoux@inforoutes-ardeche.fr"],"ALBA-LA-ROMAINE":[7,"mairie-alba@wanadoo.fr"],"ALBON-D'ARDECHE":[7,"mairie.albon7@wanadoo.fr"],"ALBOUSSIERE":[7,"ma-albou@inforoutes-ardeche.fr"],"ALISSAS":[7,"ma-aliss@inforoutes-ardeche.fr"],"ANDANCE":[7,"ma-andan@inforoutes-ardeche.fr"],"ANNONAY":[7,"maire@mairie-annonay.fr"],"ANTRAIGUES-SUR-VOLANE":[7,"ma-antra@inforoutes-ardeche.fr"],"ARCENS":[7,"hmira.arcens@inforoutes-ardeche.fr"],"ARDOIX":[7,"ma-ardoi@inforoutes-ardeche.fr"],"ARLEBOSC":[7,"mairie.arlebosc@orange.fr"],"ARRAS-SUR-RHONE":[7,"ma-arras@inforoutes-ardeche.fr"],"ASPERJOC":[7,"mairie@asperjoc.fr"],"ASTET":[7,"mairie.astet@aliceadsl.fr"],"AUBENAS":[7,"aubena00@inforoutes-ardeche.fr"],"AUBIGNAS":[7,"mairie.aubignas@orange.fr"],"BAIX":[7,"mairiedebaix@wanadoo.fr"],"BALAZUC":[7,"Balazuc.mairie@orange.fr"],"BANNE":[7,"ma-banne@inforoutes-ardeche.fr"],"BARNAS":[7,"mairie.barnas@orange.fr"],"BEAUCHASTEL":[7,"communebeauchastel@wanadoo.fr"],"BEAULIEU":[7,"mairie.beaulieu@inforoutes-ardeche.fr"],"BEAUMONT":[7,"ma-beaum@inforoutes-ardeche.fr"],"BEAUVENE":[7,"commune-de-beauvene@wanadoo.fr"],"BERRIAS-ET-CASTELJAU":[7,"ma-berri@inforoutes-ardeche.fr"],"BERZEME":[7,"mairie.berzeme@inforoutes-ardeche.fr"],"BESSAS":[7,"mairie.bessas@orange.fr"],"BIDON":[7,"ma-bidon@inforoutes-ardeche.fr"],"BOFFRES":[7,"ma-boffr@inforoutes-ardeche.fr"],"BOGY":[7,"mairie.bogy@inforoutes-ardeche.fr"],"BOREE":[7,"Mairie.Boree@inforoutes-ardeche.fr"],"BORNE":[7,"mairie.st.etienne.de.lugdares@inforoutes-ardeche.fr"],"BOUCIEU-LE-ROI":[7,"ma-bouci@inforoutes-ardeche.fr"],"BOULIEU-LES-ANNONAY":[7,"mairie.boulieu.les.annonay@inforoutes-ardeche.fr"],"BOURG-SAINT-ANDEOL":[7,"accueil@bsa-ville.fr"],"BOZAS":[7,"ma-bozas@inforoutes-ardeche.fr"],"BROSSAINC":[7,"ma-bross@inforoutes-ardeche.fr"],"BURZET":[7,"mairie.burzet@wanadoo.fr"],"CELLIER-DU-LUC":[7,""],"CHALENCON":[7,"mairie-de-chalencon@wanadoo.fr"],"CHAMBONAS":[7,"mairie.chambonas@orange.fr"],"CHAMPAGNE":[7,"ma-champ@inforoutes-ardeche.fr"],"CHAMPIS":[7,"ma-chpis@inforoutes-ardeche.fr"],"CHANDOLAS":[7,"mairie.chandolas@orange.fr"],"CHANEAC":[7,"mairie.chaneac@wanadoo.fr"],"CHARMES-SUR-RHONE":[7,"ma-2chen@inforoutes-ardeche.fr"],"CHARNAS":[7,"mairie.charnas@wanadoo.fr"],"CHASSIERS":[7,"ma-chass@inforoutes-ardeche.fr"],"CHATEAUBOURG":[7,"chateaubourg07@wanadoo.fr"],"CHATEAUNEUF-DE-VERNOUX":[7,"mairie.chateau.vx@orange.fr"],"CHAUZON":[7,"chauzon.mairie@wanadoo.fr"],"CHAZEAUX":[7,"mairiechazeaux@numeo.fr"],"CHEMINAS":[7,"ma-chemi@inforoutes-ardeche.fr"],"CHIROLS":[7,"ma-chiro@inforoutes-ardeche.fr"],"CHOMERAC":[7,"mairie-chomerac@wanadoo.fr"],"COLOMBIER-LE-CARDINAL":[7,"ma-colca@inforoutes-ardeche.fr"],"COLOMBIER-LE-JEUNE":[7,"ma-colom@inforoutes-ardeche.fr"],"COLOMBIER-LE-VIEUX":[7,"Mairie.Colombier.le.Vieux@inforoutes-ardeche.fr"],"CORNAS":[7,"mairie.cornas@wanadoo.fr"],"COUCOURON":[7,"ma-couco@inforoutes-ardeche.fr"],"COUX":[7,"ma-coux@inforoutes-ardeche.fr"],"CREYSSEILLES":[7,"mairie-de-creysseilles@wanadoo.fr"],"CROS-DE-GEORAND":[7,"crosdegeorand.mairie@wanadoo.fr"],"CRUAS":[7,"mairie@cruas.fr"],"DARBRES":[7,"mairie.darbres@inforoutes-ardeche.fr"],"DAVEZIEUX":[7,"mairie.davezieux@wanadoo.fr"],"DESAIGNES":[7,"ma-desai@inforoutes-ardeche.fr"],"DEVESSET":[7,"mairie.devesset@inforoutes-ardeche.fr"],"DOMPNAC":[7,"mairie.dompnac@inforoutes-ardeche.fr"],"DORNAS":[7,"mairie.dornas@cauri.com"],"DUNIERE-SUR-EYRIEUX":[7,"mair.duniere@wanadoo.fr"],"ECLASSAN":[7,"ma-eclas@orange.fr"],"EMPURANY":[7,"Mairie.Empurany@inforoutes-ardeche.fr"],"ETABLES":[7,"commune.etables@inforoutes-ardeche.fr"],"FABRAS":[7,"fabras@wanadoo.fr"],"FAUGERES":[7,"commune-de-faugeres@wanadoo.fr"],"FELINES":[7,"mairiedefelines@wanadoo.fr"],"FLAVIAC":[7,"mairie-de-flaviac@wanadoo.fr"],"FONS":[7,"commune.de.fons@wanadoo.fr"],"FREYSSENET":[7,""],"GENESTELLE":[7,"ma-genes@inforoutes-ardeche.fr"],"GILHAC-ET-BRUZAC":[7,"mairie.getb@orange.fr"],"GILHOC-SUR-ORMEZE":[7,"ma-gilho@inforoutes-ardeche.fr"],"GLUIRAS":[7,"mairie-gluiras@wanadoo.fr"],"GLUN":[7,"mairie.glun@inforoutes-ardeche.fr"],"GOURDON":[7,"mairie.gourdon093@orange.fr"],"GRAS":[7,"mairie.gras@inforoutes-ardeche.fr"],"GRAVIERES":[7,"mairie.gravieres@wanadoo.fr"],"GROSPIERRES":[7,"grospierres@wanadoo.fr"],"GUILHERAND-GRANGES":[7,"contact@guilherand-granges.fr"],"INTRES":[7,"Ma-Intre@inforoutes-ardeche.fr"],"ISSAMOULENC":[7,"mairie.d-issamoulenc@orange.fr"],"ISSANLAS":[7,"Mairie.Issanlas@inforoutes-ardeche.fr"],"ISSARLES":[7,"mairie.issarles@orange.fr"],"JAUJAC":[7,"ma-jauja@inforoutes-ardeche.fr"],"JAUNAC":[7,"Mairie.Jaunac@inforoutes-ardeche.fr"],"JOANNAS":[7,"ma-joann@inforoutes-ardeche.fr"],"JOYEUSE":[7,"mairie.joyeuse@wanadoo.fr"],"JUVINAS":[7,"mairie.juvinas@inforoutes-ardeche.fr"],"LABASTIDE-DE-VIRAC":[7,"ma-virac@inforoutes-ardeche.fr"],"LABASTIDE-SUR-BESORGUES":[7,"ma-lsbes@inforoutes-ardeche.fr"],"LABATIE-D'ANDAURE":[7,"ma-labat@inforoutes-ardeche.fr"],"LABEAUME":[7,"mairie-de-labeaume@wanadoo.fr"],"LABEGUDE":[7,"ma-labeg@inforoutes-ardeche.fr"],"LABLACHERE":[7,"lablachere.mairie@wanadoo.fr"],"LABOULE":[7,"ma-labou@inforoutes-ardeche.fr"],"LACHAMP-RAPHAEL":[7,"mairie.lachamp.raphael@inforoutes-ardeche.fr"],"LACHAPELLE-GRAILLOUSE":[7,"mairie-graillouse@wanadoo.fr"],"LACHAPELLE-SOUS-AUBENAS":[7,"ma-lacha@inforoutes-ardeche.fr"],"LACHAPELLE-SOUS-CHANEAC":[7,"mairie-graillouse@wanadoo.fr"],"LAFARRE":[7,"mairie.lafarre@gmail.com"],"LAGORCE":[7,"mairie.lagorce@wanadoo.fr"],"LALEVADE-D'ARDECHE":[7,"ma-lalev@inforoutes-ardeche.fr"],"LALOUVESC":[7,"ma-lalou@inforoutes-ardeche.fr"],"LAMASTRE":[7,"malamast@inforoutes-ardeche.fr"],"LANARCE":[7,"mairie.lanarce@orange.fr"],"LANAS":[7,"communedelanas@wanadoo.fr"],"LARGENTIERE":[7,"mairielargentiere@wanadoo.fr"],"LARNAS":[7,"ma-larna@inforoutes-ardeche.fr"],"LA-ROCHETTE":[7,""],"LA-SOUCHE":[7,"mairie.la.souche@inforoutes-ardeche.fr"],"LAURAC-EN-VIVARAIS":[7,"mairie.laurac@inforoutes-ardeche.fr"],"LAVAL-D'AURELLE":[7,"mairie.lavaldaurelle@wanadoo.fr"],"LAVEYRUNE":[7,"mairie-de-laveyrune@orange.fr"],"LAVILLATTE":[7,"mairielavillatte@orange.fr"],"LAVILLEDIEU":[7,"mairie@lavilledieu-ardeche.fr"],"LAVIOLLE":[7,"laviolle-mairie@orange.fr"],"LA-VOULTE-SUR-RHONE":[7,"mairie@lavoultesurrhone.fr"],"LE-BEAGE":[7,"ma-beage@inforoutes-ardeche.fr"],"LE-CHAMBON":[7,"mairie.le.chambon@orange.fr"],"LE-CHEYLARD":[7,"ma-cheyl@inforoutes-ardeche.fr"],"LE-CRESTET":[7,"le-crestet-ardeche@wanadoo.fr"],"LE-LAC-D'ISSARLES":[7,"ma-lelac@inforoutes-ardeche.fr"],"LEMPS":[7,"mairie.lemps@inforoutes-ardeche.fr"],"LENTILLERES":[7,"ma-lenti@inforoutes-ardeche.fr"],"LE-PLAGNAL":[7,"mairie-plagnal@nordnet.fr"],"LE-POUZIN":[7,"mairie@lepouzin.fr"],"LE-ROUX":[7,"mairie.le-roux@wanadoo.fr"],"LES-ASSIONS":[7,"mairie.assions@wanadoo.fr"],"LES-OLLIERES-SUR-EYRIEUX":[7,"ma.ollie@wanadoo.fr "],"LESPERON":[7,"communelesperon@orange.fr"],"LES-SALELLES":[7,"ma-salle@inforoutes-ardeche.fr"],"LES-VANS":[7,"mairielesvans@wanadoo.fr"],"LE-TEIL":[7,"mairieleteil@wanadoo.fr"],"LIMONY":[7,"ma-limon@inforoutes-ardeche.fr"],"LOUBARESSE":[7,""],"LUSSAS":[7,"mairie.lussas@inforoutes-ardeche.fr"],"LYAS":[7,"mairie.lyas@wanadoo.fr"],"MALARCE-SUR-LA-THINES":[7,"mairiemalarce@wanadoo.fr"],"MALBOSC":[7,"mairie.malbosc@wanadoo.fr"],"MARCOLS-LES-EAUX":[7,"Mairie.Marcols.les.Eaux@inforoutes-ardeche.fr"],"MARIAC":[7,"mairie.mariac@inforoutes-ardeche.fr"],"MARS":[7,"ma-mars@inforoutes-ardeche.fr"],"MAUVES":[7,"mairie@ville-mauves.com"],"MAYRES":[7,"Mairie.Mayres@inforoutes-ardeche.fr"],"MAZAN-L'ABBAYE":[7,"ma-mazan@inforoutes-ardeche.fr"],"MERCUER":[7,"mairie.mercuer@wanadoo.fr"],"MEYRAS":[7,"contact@meyras-tourisme.com"],"MEYSSE":[7,"ma-meyss@inforoutes-ardeche.fr"],"MEZILHAC":[7,"mezilhac.mairie@wanadoo.fr"],"MIRABEL":[7,"mairiemirabel@voila.fr"],"MONESTIER":[7,"Mairie.le.Monestier@inforoutes-ardeche.fr"],"MONTPEZAT-SOUS-BAUZON":[7,"ma-monsb@inforoutes-ardeche.fr"],"MONTREAL":[7,"mairie.montreal07@wanadoo.fr"],"MONTSELGUES":[7,"ma-monts@inforoutes-ardeche.fr"],"NONIERES":[7,"mairie.nonieres@wanadoo.fr"],"NOZIERES":[7,"mairie.nozieres@inforoutes-ardeche.fr"],"ORGNAC-L'AVEN":[7,"ma-orgna@inforoutes-ardeche.fr"],"OZON":[7,"mairozon@inforoutes-ardeche.fr"]}}

	end

	def find_handle # Méthode qui va chercher les handles

      array_handle = []
	  @names.map do |townhall_name, townhall_array|
	  	townhall_array.map do |key, value|
		 	@twitter = @client.user_search(key)
   		 	if @twitter
      			if twitter_user = @twitter.first
      				p twitter_user[:screen_name]
       				array_handle << twitter_user[:screen_name]
      			end
			end

	   	end
	  end
      return array_handle
	end

	def follow(array) # Méthode qui follow directement sur les handles concernés

		array.each do |handle|
			@client.follow(handle)
		end
	end

	def perform # Mise en relation des méthodes follow et find_handle
		follow(find_handle)
	end
end

testing = TownhallsFollower.new
testing.perform